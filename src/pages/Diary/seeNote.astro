---
import { obtenerNotaPorId } from "../scripts/getNoteById.js";

const { searchParams } = Astro.url;
const id = searchParams.get("id");

let nota = null;
if (id) {
    nota = await obtenerNotaPorId(id);
}
---

{
    nota ? (
        <div class="p-6 max-w-xl mx-auto bg-white rounded-xl shadow-md space-y-4">
            <h1 class="text-2xl font-bold">
                📝 Nota del {nota.fecha.toDate().toLocaleDateString()}
            </h1>
            <div>
                <h2 class="font-semibold">¿Qué aprendiste hoy?</h2>
                <p>{nota.aprendizaje}</p>
            </div>
            <div>
                <h2 class="font-semibold">
                    ¿Qué emoción sentiste más fuerte hoy?
                </h2>
                <p>{nota.emocion}</p>
            </div>
            <div>
                <h2 class="font-semibold">¿Qué provocó esa emoción?</h2>
                <p>{nota.motivo}</p>
            </div>
            <div>
                <h2 class="font-semibold">
                    ¿De qué te sentiste orgulloso hoy?
                </h2>
                <p>{nota.logro}</p>
            </div>
            <div>
                <h2 class="font-semibold">
                    ¿Qué pensamientos te gustaría soltar?
                </h2>
                <p>{nota.pensamientos}</p>
            </div>
        </div>
    ) : (
        <div class="text-center mt-10 text-gray-500">
            No se encontró la nota o hubo un error.
        </div>
    )
}
